<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Zyxxennn Attacker</title>

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">

  <!-- Google Mono-ish font -->
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@300;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f14;
      --card:#0f1720;
      --accent:#ff005c;
      --accent-2:#00e6ff;
      --neon:#7c3aed;
      --muted:#94a3b8;
    }

    html,body { height:100%; background: radial-gradient(1000px 400px at 10% 10%, rgba(124,58,237,0.06), transparent), linear-gradient(180deg,#050608 0%, #071018 100%); font-family: "Inter", "Share Tech Mono", system-ui, -apple-system, sans-serif; }

    .marquee { overflow:hidden; white-space:nowrap; box-sizing: border-box; animation: marquee 12s linear infinite; -webkit-mask-image: linear-gradient(90deg, transparent, black 10%, black 90%, transparent);}
    @keyframes marquee { 0% { transform: translateX(100%);} 100% { transform: translateX(-100%);} }

    .card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(124,58,237,0.12); backdrop-filter: blur(6px); }

    .glitch { position:relative; color: #fff; font-weight:800; letter-spacing: 0.06em; }
    .glitch:before, .glitch:after { content: attr(data-text); position: absolute; left: 0; top: 0; width: 100%; clip: rect(0,900px,0,0); opacity: .8; }
    .glitch:before { transform: translate(2px, -2px); color: var(--accent); mix-blend-mode: screen; animation: glitchTop 2.5s infinite linear alternate-reverse; }
    .glitch:after { transform: translate(-2px, 2px); color: var(--accent-2); mix-blend-mode: screen; animation: glitchBot 3s infinite linear alternate-reverse; }
    @keyframes glitchTop { 0% { clip: rect(10px,9999px,60px,0); } 50% { clip: rect(80px,9999px,150px,0); } 100% { clip: rect(10px,9999px,60px,0); } }
    @keyframes glitchBot { 0% { clip: rect(120px,9999px,160px,0);} 50% { clip: rect(40px,9999px,90px,0);} 100% { clip: rect(120px,9999px,160px,0);} }

    .btn-neon { border: 1px solid rgba(255,255,255,0.04); box-shadow: 0 6px 30px rgba(7,16,24,0.6), inset 0 0 18px rgba(124,58,237,0.04); font-weight:700; }

    .modal-backdrop { background: rgba(2,6,23,0.72); backdrop-filter: blur(6px); }
    .mono { font-family: "Share Tech Mono", monospace; letter-spacing:0.04em; }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

  <div class="w-full max-w-2xl card rounded-2xl shadow-2xl overflow-hidden border-l-2 border-t-2"
       style="border-image: linear-gradient(90deg,var(--neon), rgba(0,230,255,0.05)) 1;">
    <!-- Top runner -->
    <div class="bg-black/60 px-4 py-2">
      <div class="marquee text-2xl font-extrabold tracking-wider text-amber-400 mono">Zyxxennn Attacker — ACTIVE</div>
    </div>

    <div class="p-6 grid grid-cols-1 gap-6">
      <!-- Header foto bulat tengah -->
      <div class="flex flex-col items-center gap-3">
        <div class="w-28 h-28 rounded-full overflow-hidden border-4 border-[#7c3aed] shadow-lg">
          <img src="https://files.catbox.moe/91r278.jpg" alt="logo" class="w-full h-full object-cover">
        </div>
        <div class="text-center">
          <div class="glitch text-3xl" data-text="Zyxxennn">Zyxxennn</div>
          <div class="text-sm text-zinc-400 mt-1 mono">Attacker Control Panel</div>
        </div>
      </div>

      <!-- Welcome -->
      <div class="text-center">
        <h2 id="welcomeText" class="text-xl neon mono">WELCOME</h2>
        <div class="text-xs text-zinc-400 mt-1">(nama akan muncul setelah login dengan key)</div>
      </div>

      <!-- Input nomor WA -->
      <div>
        <label class="text-xs text-zinc-400 mono">Nomor WhatsApp tujuan</label>
        <input id="targetNumber" class="w-full mt-2 p-3 rounded bg-[#06111a] border border-[#12202b] text-zinc-100 mono placeholder-zinc-500" placeholder="6281234567890" />
        <div class="text-xs text-zinc-500 mt-2">Masukkan tanpa tanda +. Sistem akan memproses lewat sender internal.</div>
      </div>

      <!-- Menu fitur sebagai select -->
      <div>
        <label class="text-xs text-zinc-400 mono">Pilih fitur:</label>
        <select id="featureSelect" class="w-full mt-2 p-3 rounded bg-[#06111a] border border-[#12202b] text-zinc-100 mono">
          <option value="">-- Pilih Fitur --</option>
          <option value="CRASH_ANDROID">CRASH ANDROID</option>
          <option value="CRASH_IPHONE">CRASH IPHONE</option>
        </select>
        <button id="sendFeatureBtn" class="mt-3 w-full py-3 rounded btn-neon text-white mono hover:scale-[1.02] transition">Kirim</button>
      </div>

      <!-- Owner / Channel / Logout / expiry -->
      <div class="flex items-center justify-between mt-2">
        <div class="flex items-center gap-3">
          <a id="ownerLink" class="px-4 py-2 rounded-md bg-[#ffd966] text-black font-semibold mono" href="#" target="_blank">OWNER</a>
          <a id="channelLink" class="px-4 py-2 rounded-md bg-[#3b82f6] text-white font-semibold mono" href="#" target="_blank">CHANNEL</a>
        </div>

        <div class="text-right">
          <button id="logoutBtn" class="px-4 py-2 rounded-md bg-[#111827] border border-[#1f2937] mono">LOGOUT</button>
          <div class="text-xs text-zinc-400 mt-2">Masa aktif key:</div>
          <div id="keyExpiry" class="text-sm text-amber-300 mono">— belum login —</div>
        </div>
      </div>

      <!-- Notice -->
      <div id="notice" class="p-3 rounded-md bg-[#071025] border border-[#062033] text-sm text-amber-300 mono">
        Sistem siap. Gunakan fitur dengan bijak.
      </div>
    </div>
  </div>

  <!-- Modal sukses -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50">
    <div class="bg-[#071022] border border-[#2b1b5d] rounded-xl p-6 w-full max-w-lg shadow-2xl text-center">
      <h3 class="text-xl text-amber-300 font-bold mono mb-4">SUKSES</h3>
      <pre id="modalText" class="whitespace-pre-line text-sm text-white mono bg-transparent p-4 rounded-lg"></pre>
      <div class="mt-6">
        <button id="modalClose" class="px-6 py-2 rounded bg-[#7c3aed] text-white font-semibold mono">TUTUP</button>
      </div>
    </div>
  </div>

  <script>
    let session = { userId:null, nama:null, expires:null, keyValue:null };
    const welcomeText = document.getElementById('welcomeText');
    const keyExpiryEl = document.getElementById('keyExpiry');
    const notice = document.getElementById('notice');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modalText');
    const modalClose = document.getElementById('modalClose');

    (function init(){
      const s = localStorage.getItem('zyx_session');
      if (s) { try { session = JSON.parse(s); applySession(); } catch(e){ console.warn(e); } }
      document.getElementById('ownerLink').href = 'https://t.me/username_owner';
      document.getElementById('channelLink').href = 'https://t.me/channel_anda';
    })();

    function applySession(){
      welcomeText.innerText = session.nama ? `WELCOME "${session.nama}"` : 'WELCOME';
      keyExpiryEl.innerText = session.expires ? new Date(session.expires).toLocaleString() : '— belum login —';
    }

    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('zyx_session');
      session = { userId:null,nama:null,expires:null,keyValue:null };
      applySession();
      notice.innerText = 'Kamu telah logout.';
    });

    async function promptLogin(){
      const key = prompt('Masukkan key yang kamu dapat dari bot (/ckey):');
      if (!key) return false;
      try {
        const res = await fetch('/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ key }) });
        const data = await res.json();
        if (data.success) {
          session.userId = data.userId || null;
          session.nama = data.nama || null;
          session.keyValue = key;
          session.expires = data.expires || null;
          localStorage.setItem('zyx_session', JSON.stringify(session));
          applySession();
          notice.innerText = 'Login sukses.';
          return true;
        } else { alert(data.msg || 'Key tidak valid'); return false; }
      } catch (err) { alert('Gagal login: ' + err.message); return false; }
    }

    function showModal(text){ modalText.textContent = text; modal.classList.remove('hidden'); modal.classList.add('flex'); }
    function closeModal(){ modal.classList.add('hidden'); modal.classList.remove('flex'); }
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if(e.target===modal) closeModal(); });

    async function sendViaFeature(feature){
      if (!session.userId) { const ok = await promptLogin(); if(!ok) return; }
      const target = document.getElementById('targetNumber').value.trim();
      if (!target) return alert('Masukkan nomor tujuan.');
      notice.innerText = 'Mengirim permintaan...';
      try {
        const res = await fetch('/whatsapp/send', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ senderNumber:null, targetNumber:target, feature:feature, userId:session.userId })
        });
        const data = await res.json();
        if(data.success) { showModal(data.msg||'SUKSES MENGIRIM BUG KE TARGET\n\nHARAP JEDA 5 - 10 MENIT AGAR NO SENDER TIDAK KE BAND'); notice.innerText='Permintaan berhasil dikirim.'; }
